#!/usr/bin/make -f
# debian/rules for cattywampus

# Output every command that modifies files on the build system.
export DH_VERBOSE = 1

# Use modern Python packaging (avoids setup.py deprecation warnings)
export PYBUILD_SYSTEM = build

%:
	dh $@ --with python3 --buildsystem=pybuild

# Use modern build tools instead of setup.py
override_dh_auto_build:
	python3 -m build --wheel --no-isolation

override_dh_auto_install:
	python3 -m installer --destdir=debian/cattywampus dist/*.whl

# Skip tests during build since they require external tools  
override_dh_auto_test:
	# Skip tests - external dependencies not available during build

# Make sure config example is installed in the right place
override_dh_install:
	dh_install
	# Ensure config example is in the right location
	mkdir -p debian/cattywampus/usr/share/cattywampus
	cp src/config.example.toml debian/cattywampus/usr/share/cattywampus/